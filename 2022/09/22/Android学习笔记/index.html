<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="Android学习笔记2022.3.131.Contentprovider接收端无法访问的问题​	需要在接收端AndroidManifest中添加权限 12&lt;uses-permission android:name&#x3D;&quot;exampleProvider._READ_PERMISSION&quot; &#x2F;&gt;&lt;uses-permission android:name&#x3D;&quot;">
<meta property="og:type" content="article">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/2022/09/22/Android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="Android学习笔记2022.3.131.Contentprovider接收端无法访问的问题​	需要在接收端AndroidManifest中添加权限 12&lt;uses-permission android:name&#x3D;&quot;exampleProvider._READ_PERMISSION&quot; &#x2F;&gt;&lt;uses-permission android:name&#x3D;&quot;">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/Android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.assets/image-20220322213126459.png">
<meta property="og:image" content="http://example.com/Android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.assets/image-20220909112819483.png">
<meta property="og:image" content="http://example.com/Android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.assets/image-20220909112926556.png">
<meta property="og:image" content="http://example.com/Android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.assets/image-20220909113032785.png">
<meta property="og:image" content="http://example.com/Android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.assets/image-20220909114234780.png">
<meta property="article:published_time" content="2022-09-22T07:48:54.040Z">
<meta property="article:modified_time" content="2022-09-13T08:22:04.862Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/Android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.assets/image-20220322213126459.png">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-Android学习笔记" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/09/22/Android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="article-date">
  <time class="dt-published" datetime="2022-09-22T07:48:54.040Z" itemprop="datePublished">2022-09-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Android学习笔记"><a href="#Android学习笔记" class="headerlink" title="Android学习笔记"></a>Android学习笔记</h1><h2 id="2022-3-13"><a href="#2022-3-13" class="headerlink" title="2022.3.13"></a>2022.3.13</h2><h3 id="1-Contentprovider接收端无法访问的问题"><a href="#1-Contentprovider接收端无法访问的问题" class="headerlink" title="1.Contentprovider接收端无法访问的问题"></a>1.Contentprovider接收端无法访问的问题</h3><p>​	需要在接收端AndroidManifest中添加权限</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;uses-permission android:name=&quot;exampleProvider._READ_PERMISSION&quot; /&gt;</span><br><span class="line">&lt;uses-permission android:name=&quot;exampleProvider._WRITE_PERMISSION&quot; /&gt;</span><br></pre></td></tr></table></figure>

<h2 id="2022-3-22"><a href="#2022-3-22" class="headerlink" title="2022.3.22"></a>2022.3.22</h2><h3 id="1-Apache-无法访问htdocs中的xml文件问题"><a href="#1-Apache-无法访问htdocs中的xml文件问题" class="headerlink" title="1.Apache 无法访问htdocs中的xml文件问题"></a>1.Apache 无法访问htdocs中的xml文件问题</h3><p>需要配置apache的文件访问路径</p>
<p><img src="/Android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.assets/image-20220322213126459.png" alt="image-20220322213126459"></p>
<p>注意路径分割用的是”&#x2F;“</p>
<h3 id="2-配置允许我们以明文的方式在网络上传输数据而HTTP使用的就是明文传输方式"><a href="#2-配置允许我们以明文的方式在网络上传输数据而HTTP使用的就是明文传输方式" class="headerlink" title="2.配置允许我们以明文的方式在网络上传输数据而HTTP使用的就是明文传输方式"></a>2.配置允许我们以明文的方式在网络上传输数据而HTTP使用的就是明文传输方式</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">network-security-config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">base-config</span> <span class="attr">cleartextTrafficPermitted</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">trust-anchors</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">certificates</span> <span class="attr">src</span>=<span class="string">&quot;system&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">trust-anchors</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">base-config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">network-security-config</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="2022-3-23"><a href="#2022-3-23" class="headerlink" title="2022.3.23"></a>2022.3.23</h2><h3 id="1-但是前一天晚上可以访问，第二天就出现Failed-to-connect-to-x2F-10-0-2-2-80的问题"><a href="#1-但是前一天晚上可以访问，第二天就出现Failed-to-connect-to-x2F-10-0-2-2-80的问题" class="headerlink" title="1.但是前一天晚上可以访问，第二天就出现Failed to connect to &#x2F;10.0.2.2:80的问题"></a>1.但是前一天晚上可以访问，第二天就出现Failed to connect to &#x2F;10.0.2.2:80的问题</h3><p>分析原因可能是第二天重新联网后被分配的IP地址发生变化，模拟器原来分配的地址无法访问到网址，擦除数据即可；</p>
<h3 id="2-引入各种网络库的代码"><a href="#2-引入各种网络库的代码" class="headerlink" title="2.引入各种网络库的代码"></a>2.引入各种网络库的代码</h3><p>1）okhttp：implementation ‘com.squareup.okhttp3:okhttp:4.9.3’</p>
<p>2）gson：implementation ‘com.google.code.gson:gson:2.8.5’</p>
<p>3）retrofitTest: implementation ‘com.squareup.retrofit2:retrofit:2.6.1’<br>                            implementation ‘com.squareup.retrofit2:converter-gson:2.6.1’</p>
<p>因此添加上述第一条依赖会自动将Retrofit、OkHttp和Okio这几个库一起下载，我们无须再手动引入OkHttp库。另外，Retrofit还会将服务器返回的JSON数据自动解析成对象，因此上述第二条依赖就是一个Retrofit的转换库，它是借助GSON来解析JSON数据的，所以会自动将GSON库一起下载下来，这样我们也不用手动引入GSON库了。</p>
<h3 id="3-socket-failed-EPERM-Operation-not-permitted"><a href="#3-socket-failed-EPERM-Operation-not-permitted" class="headerlink" title="3.socket failed: EPERM (Operation not permitted)"></a>3.socket failed: EPERM (Operation not permitted)</h3><p>没打开网络授权权限；</p>
<h3 id="4-协程的依赖库"><a href="#4-协程的依赖库" class="headerlink" title="4.协程的依赖库"></a>4.协程的依赖库</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">implementation <span class="string">&quot;org.jetbrains.kotlinx:kotlinx-coroutines-core:1.1.1&quot;</span></span><br><span class="line">implementation <span class="string">&quot;org.jetbrains.kotlinx:kotlinx-coroutines-android:1.1.1&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="5-协程作用域创建方法"><a href="#5-协程作用域创建方法" class="headerlink" title="5.协程作用域创建方法"></a>5.协程作用域创建方法</h3><p>GlobalScope.launch、runBlocking、launch、coroutineScope这几种作用域构建器，它们都可以用于创建一个新的协程作用域。不过<br>GlobalScope.launch和runBlocking函数是可以在任意地方调用的，coroutineScope函数可以在协程作用域或挂起函数中调用，而launch函数只能在协程作用域中调用。</p>
<h2 id="2022-3-28"><a href="#2022-3-28" class="headerlink" title="2022.3.28"></a>2022.3.28</h2><h3 id="1-Github"><a href="#1-Github" class="headerlink" title="1.Github"></a>1.Github</h3><p>将项目push时遇到问题，因为GitHub的默认主支名称由原来的master改为了main；</p>
<h2 id="2022-7-8"><a href="#2022-7-8" class="headerlink" title="2022.7.8"></a>2022.7.8</h2><h3 id="1-View-Binding的使用"><a href="#1-View-Binding的使用" class="headerlink" title="1. View Binding的使用"></a>1. View Binding的使用</h3><p>需要在项目工程文件下添加配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">android&#123;</span><br><span class="line">***</span><br><span class="line">buildFeatures&#123;</span><br><span class="line">	viewBinding true</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="1-1-在Activity中的使用"><a href="#1-1-在Activity中的使用" class="headerlink" title="1.1 在Activity中的使用"></a>1.1 在Activity中的使用</h4><p>一旦启动了ViewBinding功能之后，Android Studio会自动为我们所编写的每一个布局文件都生成一个对应的Binding类。</p>
<p>Binding类的命名规则是将布局文件按驼峰方式重命名后，再加上Binding作为结尾。</p>
<p>比如说，前面我们定义了一个activity_main.xml布局，那么与它对应的Binding类就是ActivityMainBinding。</p>
<p>当然，如果有些布局文件你不希望为它生成对应的Binding类，可以在该布局文件的根元素位置加入如下声明：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;LinearLayout</span><br><span class="line">    xmlns:tools=&quot;http://schemas.android.com/tools&quot;</span><br><span class="line">    ...</span><br><span class="line">    tools:viewBindingIgnore=&quot;true&quot;&gt;</span><br><span class="line">    ...</span><br><span class="line">&lt;/LinearLayout&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>如何设置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">class MainActivity : AppCompatActivity() &#123;</span><br><span class="line"></span><br><span class="line">    override fun onCreate(savedInstanceState: Bundle?) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState)</span><br><span class="line">        val binding = ActivityMainBinding.inflate(layoutInflater)//利用ActivityManinBinding的inflate函数去加载布局，inflate()函数接收一个LayoutInflate参数，在Activity中是可以直接获取的</span><br><span class="line">        setContentView(binding.root)//调用Binding类的getRoot()函数就可以得到xml中根元素的实例,setContentView()函数当中，这样Activity就可以成功显示activity_main.xml这个布局的内容了</span><br><span class="line">        binding.textView.text = &quot;Hello&quot;//调用getTextView()函数可以获得id为textView的元素实例</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="2022-7-11"><a href="#2022-7-11" class="headerlink" title="2022 .7.11"></a>2022 .7.11</h2><h3 id="1-动态添加Fragment的做法"><a href="#1-动态添加Fragment的做法" class="headerlink" title="1. 动态添加Fragment的做法"></a>1. 动态添加Fragment的做法</h3><p>动态添加Fragment主要分为5步。</p>
<p>(1) 创建待添加Fragment的实例。</p>
<p>(2) 获取FragmentManager，在Activity中可以直接调用getSupportFragmentManager()方法获取。</p>
<p>(3) 开启一个事务，通过调用beginTransaction()方法开启。</p>
<p>(4) 向容器内添加或替换Fragment，一般使用replace()方法实现，需要传入容器的id和待添加的Fragment实例。</p>
<p>(5) 提交事务，调用commit()方法来完成。</p>
<h3 id="2-根据屏幕和分辨率的大小动态的加载布局的功能"><a href="#2-根据屏幕和分辨率的大小动态的加载布局的功能" class="headerlink" title="2. 根据屏幕和分辨率的大小动态的加载布局的功能"></a>2. 根据屏幕和分辨率的大小动态的加载布局的功能</h3><h4 id="2-1-android中常见的限定符"><a href="#2-1-android中常见的限定符" class="headerlink" title="2.1  android中常见的限定符"></a>2.1  android中常见的限定符</h4><table>
<thead>
<tr>
<th>屏幕特征</th>
<th>限定符</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>大小</td>
<td>small</td>
<td>提供给小屏幕设备的资源</td>
</tr>
<tr>
<td></td>
<td>normal</td>
<td>提供给中等屏幕设备的资源</td>
</tr>
<tr>
<td></td>
<td>large</td>
<td>提供给大屏幕设备的资源</td>
</tr>
<tr>
<td></td>
<td>xlarge</td>
<td>提供给超大屏幕设备的资源</td>
</tr>
<tr>
<td>分辨率</td>
<td>ldpi</td>
<td>提供给低分辨率设备的资源（120 dpi以下）</td>
</tr>
<tr>
<td></td>
<td>mdpi</td>
<td>提供给中等分辨率设备的资源（120 dpi~160 dpi）</td>
</tr>
<tr>
<td></td>
<td>hdpi</td>
<td>提供给高分辨率设备的资源（160 dpi~240 dpi）</td>
</tr>
<tr>
<td></td>
<td>xhdpi</td>
<td>提供给超高分辨率设备的资源（240 dpi~320 dpi）</td>
</tr>
<tr>
<td></td>
<td>xxhdpi</td>
<td>提供给超超高分辨率设备的资源（320 dpi~480 dpi）</td>
</tr>
<tr>
<td>方向</td>
<td>land</td>
<td>提供给横屏设备的资源</td>
</tr>
<tr>
<td></td>
<td>port</td>
<td>提供给竖屏设备的资源</td>
</tr>
</tbody></table>
<h4 id="2-2-使用最小宽度限定符"><a href="#2-2-使用最小宽度限定符" class="headerlink" title="2.2 使用最小宽度限定符"></a>2.2 使用最小宽度限定符</h4><h2 id="2022-7-14"><a href="#2022-7-14" class="headerlink" title="2022-7-14"></a>2022-7-14</h2><h3 id="RecycleView的设置"><a href="#RecycleView的设置" class="headerlink" title="RecycleView的设置"></a>RecycleView的设置</h3><p>1.在XML文件中定义布局</p>
<p>2.需要定义显示在子项中的实例类</p>
<p>3.需要定义子项布局XML文件</p>
<p>4.需要生成适配器，适配器传入数据源并且继承RecyclerView.Adapter并且为其指定泛型为XXX.ViewHolder</p>
<p>5.适配器内定义内联类ViewHolder它要继承自RecyclerView.ViewHolder。然后ViewHolder的主构造函数中要传入一个View参数，这个参数通常就是RecyclerView子项的最外层布局，那么我们就可以通过findViewById()方法来获取布局中ImageView和TextView的实例了。</p>
<p>6.需要重写三个，那么就必须重写onCreateViewHolder()、onBindViewHolder()和getItemCount()这3个方法。onCreateViewHolder()方法是用于创建ViewHolder实例的，onBindViewHolder()方法用于对RecyclerView子项的数据进行赋值，会在每个子项被滚动到屏幕内的时候执行，getItemCount()方法就非常简单了，它用于告诉RecyclerView一共有多少子项，直接返回数据源的长度就可以了</p>
<h2 id="2022-9-1"><a href="#2022-9-1" class="headerlink" title="2022-9.1"></a>2022-9.1</h2><h3 id="Gradle相关配置"><a href="#Gradle相关配置" class="headerlink" title="Gradle相关配置"></a>Gradle相关配置</h3><h4 id="abi"><a href="#abi" class="headerlink" title="abi"></a>abi</h4><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ndk &#123;</span><br><span class="line">    abiFilters <span class="string">&quot;arm64-v8a&quot;</span>,<span class="string">&quot;x86&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ABI 是 Application Binary Interface 的缩写</p>
<p>不同的Android手机要使用不同的CPU，因此支持不同的指令集。CPU与指令集的每种组合都有其自己应用的二进制界面（或<strong>ABI</strong>）</p>
<p>典型的ABI包含以下信息：</p>
<ul>
<li>机器代码应使用的CPU指令集</li>
<li>运行时内存存储何加载的字节顺序</li>
<li>可执行二进制文件（例如程序和共享库）的格式，以及它们支持的内容类型。</li>
<li>用于解析内容与系统之间数据的各种约定。这些约定包括对齐限制，以及系统如何使用堆栈和在调用函数时注册。</li>
<li>运行时可用于机器代码的函数符号列表 - 通常来自非常具体的库集。</li>
</ul>
<h4 id="如何自定义打包文件名称"><a href="#如何自定义打包文件名称" class="headerlink" title="如何自定义打包文件名称"></a>如何自定义打包文件名称</h4><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">applicationVariants.all&#123; variant -&gt;</span><br><span class="line">    variant.outputs.all&#123;</span><br><span class="line">        outputFileName = <span class="string">&quot;SKLauncher_$&#123;variant.versionName&#125;.apk&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="sourceSets"><a href="#sourceSets" class="headerlink" title="sourceSets"></a>sourceSets</h4><p>java插件引入了一个概念叫做SourceSets，通过修改SourceSets中的属性，可以指定哪些源文件（或文件夹下的源文件）要被编译，哪些源文件要被排除。<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=Gradle&spm=1001.2101.3001.7020">Gradle</a>就是通过它实现Java项目的布局定义。</p>
<h4 id="lintOptions"><a href="#lintOptions" class="headerlink" title="lintOptions"></a>lintOptions</h4><p> lintOptions 配置，其作用是 <strong>协助我们发现项目中代码质量问题</strong>。</p>
<h2 id="2022-9-4"><a href="#2022-9-4" class="headerlink" title="2022.9.4"></a>2022.9.4</h2><h3 id="1、handler弱引用"><a href="#1、handler弱引用" class="headerlink" title="1、handler弱引用"></a>1、handler弱引用</h3><h4 id="1-1-Handler内存泄漏说明"><a href="#1-1-Handler内存泄漏说明" class="headerlink" title="1.1 Handler内存泄漏说明"></a>1.1 Handler内存泄漏说明</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Handler</span> <span class="variable">mHandler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Handler</span>()&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handleMessage</span><span class="params">(Message msg)</span> &#123;</span><br><span class="line">                <span class="built_in">super</span>.handleMessage(msg);</span><br><span class="line">                <span class="keyword">switch</span> (msg.what) &#123;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">99</span>:</span><br><span class="line">                        <span class="comment">// do something</span></span><br><span class="line">                        sendEmptyMessageDelayed(<span class="number">100</span>, <span class="number">2000</span>);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">100</span>:</span><br><span class="line">                        <span class="comment">// do something</span></span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">default</span>:<span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">	mHandler.sendEmptyMessage(<span class="number">99</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mHandler会作为成员变量保存在发送的消息msg中，即msg持有mHandler的引用，而mHandler是Activity的非静态内部类实例，即mHandler持有Activity的引用，那我们就可以理解为msg间接持有Activity的引用。msg被发送后先放到消息队列MessageQueue中，然后等待Looper的轮询处理（MessageQueue 和 Looper 都是与线程相关联的， MessageQueue 是 Looper 引用的成员变量，而 Looper 是保存在ThreadLocal 中的）。那么当 Activity 退出后，msg 可能仍然存在于消息对列MessageQueue 中未处理或者正在处理，那么这样就会导致 Activity 无法被回收，以致发生Activity 的内存泄露。</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>通常在Android开发中如果要使用内部类，但又要规避内存泄漏，一般都会采用<strong>静态内部类+弱引用</strong>的方式优化一下Handler</p>
<h3 id="2、Android-merge的使用"><a href="#2、Android-merge的使用" class="headerlink" title="2、Android merge的使用"></a>2、Android merge的使用</h3><p><strong>目的</strong>：减少布局层数</p>
<p><strong>效果</strong>：减少视图树种的节点个数，加快视图的绘制，提高UI性能</p>
<p><strong>何时使用：</strong></p>
<p>1.子视图不需要指定任何针对夫视图的布局属性</p>
<p>2.假如需要在LinearLayout里面嵌入一个布局（或者视图），而恰恰这个布局的更节点也是LinearLayout，这样就多了一层没有用的嵌套，无疑会拖慢程序的速度。而这个时候如果使用merge标签就可以避免这样的问题</p>
<h2 id="2022-9-7"><a href="#2022-9-7" class="headerlink" title="2022.9.7"></a>2022.9.7</h2><h3 id="1、ViewPager，ScrollView-嵌套ViewPager滑动冲突解决"><a href="#1、ViewPager，ScrollView-嵌套ViewPager滑动冲突解决" class="headerlink" title="1、ViewPager，ScrollView 嵌套ViewPager滑动冲突解决"></a>1、ViewPager，ScrollView 嵌套ViewPager滑动冲突解决</h3><h4 id="1-1-View事件的分发机制"><a href="#1-1-View事件的分发机制" class="headerlink" title="1.1 View事件的分发机制"></a>1.1 View事件的分发机制</h4><p>View的事件分发机制主要涉及到以下三个方法</p>
<ul>
<li>dispatchTouchEvent，这个方法主要是用来分发事件的</li>
<li>onInterceptTouchEvent，这个方法主要是用来拦截事件的（需要注意的是ViewGroup才有这个方法，View没有）</li>
<li>onTouchEvent 这个方法主要是用来处理事件的</li>
<li>requestDisallowInterceptTouchEvent(true)，这个方法能够影响父View是否拦截事件，true表示父View不拦截事件，false表示父View拦截事件</li>
</ul>
<h2 id="2022-9-9"><a href="#2022-9-9" class="headerlink" title="2022.9.9"></a>2022.9.9</h2><h3 id="1、Android-View的scrollTo-、scrollBy-和Scroller类总结"><a href="#1、Android-View的scrollTo-、scrollBy-和Scroller类总结" class="headerlink" title="1、Android View的scrollTo()、scrollBy()和Scroller类总结"></a>1、Android View的scrollTo()、scrollBy()和Scroller类总结</h3><h4 id="1-1-View的scrollTo-、scrollBy"><a href="#1-1-View的scrollTo-、scrollBy" class="headerlink" title="1.1 View的scrollTo()、scrollBy()"></a>1.1 View的scrollTo()、scrollBy()</h4><h5 id="1-1-1-scrollTo-scrollBy-使用说明"><a href="#1-1-1-scrollTo-scrollBy-使用说明" class="headerlink" title="1.1.1 scrollTo scrollBy 使用说明"></a>1.1.1 scrollTo scrollBy 使用说明</h5><ul>
<li>scrollTo、scrollBy()方法是View中的，因此任何的View都可以通过这两种方法进行移动。首先要明白的是，scrollTo、scrollBy滑动的是View中的内容（而且还是整体滑动），而不是View本身。我们的滑动控件如SrollView可以限定宽、高大小，以及在布局中的位置，但是滑动控件中的内容（或者里面的childView）可以是无限长、宽的，我们调用View的scrollTo、scrollBy方法，相当于是移动滑动控件中的画布Canvas，然后进行重绘，屏幕上也就显示相应的内容。</li>
</ul>
<p>1.1.2 scrollTo使用介绍</p>
<ul>
<li>调用scrollTo(100,0)表示将View中的内容移动到距离内容初始显示位置的x&#x3D;100,y&#x3D;0的地方，效果如下图</li>
</ul>
<p><img src="/Android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.assets/image-20220909112819483.png" alt="image-20220909112819483"></p>
<ul>
<li>调用scrollTo(0,100)效果如下图</li>
</ul>
<p><img src="/Android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.assets/image-20220909112926556.png" alt="image-20220909112926556"></p>
<ul>
<li>调用scrollTo(100,100)效果如下图</li>
</ul>
<p><img src="/Android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.assets/image-20220909113032785.png" alt="image-20220909113032785"></p>
<h4 id="1-1-3-scrollBy使用介绍"><a href="#1-1-3-scrollBy使用介绍" class="headerlink" title="1.1.3 scrollBy使用介绍"></a>1.1.3 scrollBy使用介绍</h4><ul>
<li><p>调用scrollBy(0,100)表示将View中的内容移动到原内容基础上x&#x3D;x+0,y&#x3D;y+100的地方，所以scrollBy是在原来的基础上移动的，效果如下图：</p>
<p><img src="/Android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.assets/image-20220909114234780.png" alt="image-20220909114234780">scrollBy()的源码中也非常简单调用的是scrollTo(),只不过加上了当前的mScrollx或者mscrollY</p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/09/22/Android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" data-id="cl8cr6n8t00028om6561icrdf" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2022/09/22/Android%20FrameWork%20%E7%9A%84%E5%AD%A6%E4%B9%A0/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title"></div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/09/22/Android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">(no title)</a>
          </li>
        
          <li>
            <a href="/2022/09/22/Android%20FrameWork%20%E7%9A%84%E5%AD%A6%E4%B9%A0/">(no title)</a>
          </li>
        
          <li>
            <a href="/2022/09/22/Android-%E5%BC%B1%E5%BC%95%E7%94%A8/">Android 弱引用</a>
          </li>
        
          <li>
            <a href="/2022/09/21/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>